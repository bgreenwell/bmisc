{
    "contents" : "##' NumPy style matrix function\n##'\n##' Returns a matrix from a character vector or list of vectors.\n##' \n##' @examples\n##' ## Using character vectors\n##' mat('1, 2, 3; 4, 5, 6')  # similar to numpy.mat from Python extension NumPy\n##' (m <- mat(paste('exp(', 1:9, ')')))\n##' resize(m, 3, 3)\n##' resize(m, 3, 3, byrow = FALSE)\n##' matrix(exp(1:9), 3, 3)\n##' \n##' ## Using a list\n##' mat(list(1:3, 4:6, 7:9))\nmat <- function(x, ...) {\n  UseMethod(\"mat\")\n}\n\n##' @rdname mat\n##' @export\n##' @method mat character\nmat.character <- function(x) {\n  \n  ## Gather rows and individual values\n  char_rows <- unlist(strsplit(x, split = \";\"))\n  values <- unname(unlist(sapply(char_rows, strsplit, split = \",\")))\n  \n  ## Form matrix from parsed values by calling R's built-in matrix function\n  matrix(sapply(values, function(x) eval(parse(text = x))), \n         nrow = length(char_rows), byrow = TRUE)\n  \n}\n\n##' @rdname mat\n##' @export\n##' @method mat list\nmat.list <- function(x, rows = TRUE) {\n  \n  ## Check element types\n  if (!all(sapply(x, class) %in% c(\"numeric\", \"integer\"))) {\n    stop(\"Each element must be of type 'numeric' or 'integer'.\", call. = FALSE)\n  }\n  \n  ## Check length of each element\n  if (!all(sapply(x, length) >= 1) && length(unique(sapply(x, length))) != 1) {\n    stop(\"Each element must contain at least one value.\", call. = FALSE)\n  }\n  \n  ## Form matrix by combining elements\n  if (rows) do.call(rbind, x) else do.call(cbind, x)\n  \n}\n\n##' Resize a given matrix\n##' \n##' Returns a new matrix of dimension nrows by ncols using the elements of x.\nresize <- function(x, nrows, ncols, byrow = TRUE) {\n  \n  ## Check dimensions (if supplied)\n  if (missing(nrows) && missing(ncols)) {\n    nrows <- nrow(x)\n    ncols <- ncol(x)\n  }\n  if (missing(nrows) && !missing(ncols)) {\n    if (length(x) %% ncols != 0) {\n      stop(\"dimension mismatch.\", call. = FALSE)\n    }\n    nrows <- length(x) / ncols\n  }\n  if (!missing(nrows) && missing(ncols)) {\n    if (length(x) %% nrows != 0) {\n      stop(\"dimension mismatch.\", call. = FALSE)\n    }\n    ncols <- length(x) / nrows\n  }\n  if (nrows * ncols != length(x)) {\n    stop(\"dimension mismatch.\", call. = FALSE)\n  }\n  if (!inherits(x, \"matrix\")) {\n    stop(\"x must be of class 'matrix'.\", call. = FALSE)\n  }\n\n  ## Return matrix with new dimensions\n  if (byrow) {\n    attr(x, \"dim\") <- c(ncols, nrows) \n    t(x)\n  } else {\n    attr(x, \"dim\") <- c(nrows, ncols) \n    x\n  }\n  \n}",
    "created" : 1417020330709.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4003869673",
    "id" : "7F522F1D",
    "lastKnownWriteTime" : 1417021377,
    "path" : "~/Desktop/Dropbox/devel/misc/R/mat.R",
    "project_path" : "R/mat.R",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_source"
}